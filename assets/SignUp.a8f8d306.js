import{d as p,u as w,r as f,o as k,c as h,a as r,w as u,v as i,b as t,t as l,n as B,e as b,f as g,g as x,h as C,F as y,i as A,j as _,k as v,l as E}from"./index.aa2e47f7.js";const F=r("p",{class:"text-center font-sans text-2xl font-bold"},"\u8A3B\u518A",-1),S={class:"text-alert"},D={class:"text-alert"},N={class:"text-alert"},U=["disabled"],V=E("\u767B\u5165"),R=p({setup(P){const c=A(),n=w(),e=f({isSending:!1,name:"",email:"",password:"",checkName:()=>{if(e.name==="")return;if(e.name.indexOf(" ")>-1)return"\u66B1\u7A31\u4E0D\u53EF\u5305\u542B\u7A7A\u767D\u5B57\u5143";const s=e.name.length;if(s<2||s>10)return"\u66B1\u7A31\u9700\u8F38\u5165 2~10 \u500B\u5B57\u5143"},checkEmail:()=>{if(e.email!==""&&!e.email.match(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/))return"\u4FE1\u7BB1\u683C\u5F0F\u4E0D\u6B63\u78BA"},checkPassword:()=>{if(e.password!==""){if(e.password.indexOf(" ")>-1)return"\u5BC6\u78BC\u4E0D\u53EF\u5305\u542B\u7A7A\u767D\u5B57\u5143";if(e.password.length<8||e.password.length>20)return"\u5BC6\u78BC\u9700\u8F38\u5165 8~20 \u500B\u5B57\u5143"}},checkContent:()=>!!(e.name&&e.email&&e.password&&!e.checkName()&&!e.checkEmail()&&!e.checkPassword()),reset:()=>{e.isSending=!1,e.name="",e.email="",e.password=""}});function d(){!e.checkContent()||(e.isSending=!0,_.post("https://enigmatic-reef-71098.herokuapp.com/user/sign_up",{name:e.name.trim(),email:e.email.toLowerCase(),password:e.password.trim()}).then(s=>{localStorage.setItem("metaWall",s.data.data.token),n.id=s.data.data._id,n.name=s.data.data.name,n.avatar=s.data.data.avatar,e.reset(),window.alert("\u8A3B\u518A\u6210\u529F"),c.push({name:"home"})}).catch(s=>{e.reset(),window.alert(s.response.data.message)}))}return(s,a)=>{const m=v("Router-link");return k(),h(y,null,[F,r("div",{class:"grid px-9 pt-9 font-azeret",onKeyup:a[5]||(a[5]=x(C(o=>d(),["stop"]),["enter"]))},[u(r("input",{class:"custom-border focus:border-primary dark:text-black",type:"text",placeholder:"\u66B1\u7A31","onUpdate:modelValue":a[0]||(a[0]=o=>t(e).name=o)},null,512),[[i,t(e).name]]),r("span",S,l(t(e).checkName()),1),u(r("input",{class:"custom-border mt-4 focus:border-primary dark:text-black",type:"email",placeholder:"Email","onUpdate:modelValue":a[1]||(a[1]=o=>t(e).email=o),onInput:a[2]||(a[2]=o=>t(e).email=t(e).email.toLowerCase())},null,544),[[i,t(e).email]]),r("span",D,l(t(e).checkEmail()),1),u(r("input",{class:"custom-border mt-4 focus:border-primary dark:text-black",type:"password",placeholder:"Password","onUpdate:modelValue":a[3]||(a[3]=o=>t(e).password=o)},null,512),[[i,t(e).password]]),r("span",N,l(t(e).checkPassword()),1),r("button",{type:"button",class:B([{"primary-color border-black":t(e).checkContent(),"cursor-not-allowed border-gray-500 bg-gray-400 text-white":!t(e).checkContent(),"cursor-wait":t(e).isSending},"custom-border mt-8 rounded-lg py-2 shadow-sm shadow-black"]),disabled:!t(e).checkContent()||t(e).isSending,onClick:a[4]||(a[4]=o=>d())}," \u8A3B\u518A ",10,U),b(m,{to:"/",class:"mx-auto mt-2 inline-block p-1"},{default:g(()=>[V]),_:1})],32)],64)}}});export{R as default};
